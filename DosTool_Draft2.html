
<!DOCTYPE html><html class=''>
<head><!--meta charset='UTF-8'><meta name="robots" content="noindex"><link rel="canonical" href="http://codepen.io/mulderp/pen/wxmBd" /-->

<style class="cp-pen-styles">circle {
  color: black;
}
label{
  font-size: 50px;
  font-weight: bold;
}
</style>
<title>
A tool to draw DoS graph
</title>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.1/d3.min.js"></script>
<h1> Online tool to draw directed graph for lamport logical clock </h1>
<table id="main-table">
<tr>
<td id="question">
Number of process :
<select name="plist" onChange="getProcess(this)">
  <option>1</option>
  <option>2</option>
  <option>3</option>
  <option>4</option>
  <option>5</option>
  <option>6</option>
</select>
</td> 
</tr><tr>
<td id="question-graph">
<div id="graph">
</div>
</td>
</tr>
</table>

<script>

numP = 0;

function getProcess(thelist)
{
  var idx = thelist.selectedIndex;
  numP = thelist.options[idx].innerHTML;
  alert(numP);
  visualise();
}

var vis = d3.select("#graph")
            .append("svg")
.attr("width", 1000).attr("height", 5000);

var nodes = [];
var nodesNum = 0;

function visualise()
{
nodesNum = numP * numP;
alert("Entering visualise");
alert(nodesNum);
for(var i=1, yE=50; i<=numP; i++) {

   var innerNode = [{x: 10, y : yE}];
  
   for(var j=1, xE=70; j<numP; j++)
   {
     innerNode.push({x: xE, y: yE});
     xE = xE + 70;
   }
  /* var nodes_p = [
    {x: 10, y: yE},
    {x: 70, y: yE},
    {x: 140, y: yE},
    {x: 210, y: yE}
  ]
  */
   nodes.push(innerNode);
   yE = yE + 50;
}

/*var nodes_p1 = [
    {x: 10, y: 50},
    {x: 70, y: 50},
    {x: 140, y: 50},
    {x: 210, y: 50}
  ]

var nodes_p2 = [
    {x: 10, y: 100},
    {x: 70, y: 100},
    {x: 140, y: 100},
    {x: 210, y: 100}
  ]
var nodes_p3 = [
    {x: 10, y: 150},
    {x: 70, y: 150},
    {x: 140, y: 150},
    {x: 210, y: 150}
  ]
*/

for(var i=0; i<nodes.length; i++)
{
//alert("Nodes.length = "+nodes.length);
vis.selectAll("circle.nodes")
   .data(nodes[i])
   .enter()
   .append("svg:circle")
   .attr("cx", function(d) { return d.x; })
   .attr("cy", function(d) { return d.y; })
   .attr("r", "10px")
   .attr("fill", "black") 
}

/*
vis.selectAll("circle.nodes")
   .data(nodes_p1)
   .enter()
   .append("svg:circle")
   .attr("cx", function(d) { return d.x; })
   .attr("cy", function(d) { return d.y; })
   .attr("r", "10px")
   .attr("fill", "black")
 
vis.selectAll("circle.nodes")
   .data(nodes_p2)
   .enter()
   .append("svg:circle")
   .attr("cx", function(d) { return d.x; })
   .attr("cy", function(d) { return d.y; })
   .attr("r", "10px")
   .attr("fill", "black")

vis.selectAll("circle.nodes")
   .data(nodes_p3)
   .enter()
   .append("svg:circle")
   .attr("cx", function(d) { return d.x; })
   .attr("cy", function(d) { return d.y; })
   .attr("r", "10px")
   .attr("fill", "black")


var links = [
  {source: nodes_p1[0], target: nodes_p1[3]},
  {source: nodes_p2[0], target: nodes_p2[3]},
  {source: nodes_p3[0], target: nodes_p3[3]}
]
  
  vis.selectAll(".line")
   .data(links)
   .enter()
   .append("line")
   .attr("x1", function(d) { return d.source.x })
   .attr("y1", function(d) { return d.source.y })
   .attr("x2", function(d) { return d.target.x })
   .attr("y2", function(d) { return d.target.y })
   .style("stroke", "rgb(0,0,0)")
   .style("stroke-width", "0.75%");

var totalUnits = vis.append("svg:text")
  .attr("class", "label")
  .attr("dx", 30)
  .attr("dy", 70)
  .attr("text-anchor", "middle") // text-align: right
  .text("P1");

var totalUnits = vis.append("svg:text")
  .attr("class", "label")
  .attr("dx", 30)
  .attr("dy", 120)
  .attr("text-anchor", "middle") // text-align: right
  .text("P2");

var totalUnits = vis.append("svg:text")
  .attr("class", "label")
  .attr("dx", 30)
  .attr("dy", 170)
  .attr("text-anchor", "middle") // text-align: right
  .text("P3");


// Now coming to actual probem
var doslinks = [
  {source: nodes_p1[1], target: nodes_p2[3]},
  {source: nodes_p1[2], target: nodes_p3[2]}
]

vis.selectAll(".line")
   .data(doslinks)
   .enter()
   .append("line")
   .attr("x1", function(d) { return d.source.x })
   .attr("y1", function(d) { return d.source.y })
   .attr("x2", function(d) { return d.target.x })
   .attr("y2", function(d) { return d.target.y })
   .style("stroke", "rgb(0,0,0)")
   .style("stroke-width", "0.75%");
*/
}
//@ sourceURL=pen.js
</script>
<!--script src='http://codepen.io/assets/editor/live/css_live_reload_init.js'></script-->
</body></html>
